import{j as e,u as f}from"./vendor-CSTohHpX.js";import{r as c}from"./react-B9B04VyU.js";import{u as j,b as N}from"./index-C_gttvLM.js";import{C as p,N as b,E as o,F as y}from"./footer-DiVLYYck.js";import{g as v}from"./openai-268ylVpD.js";function w({selectedChapter:r,onChapterSelect:d}){var a;const[s,x]=c.useState(""),[m,n]=c.useState(""),[h,i]=c.useState(!1),u=async t=>{x(t),n(""),i(!0);try{const l=`Constitution of Kenya 2010, ${r.title}, Article ${t}`,g=await v(l);n(g)}catch(l){console.error("Error generating summary:",l),n("Unable to generate summary at this time.")}finally{i(!1)}};return e.jsxs("section",{children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Interactive Constitution Explorer"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Navigate through the chapters and articles of Kenya's Constitution with AI-powered summaries and plain-language explanations."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"neu-card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Constitution Chapters"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:p.map(t=>{var l;return e.jsxs("button",{onClick:()=>d(t),className:`w-full p-3 rounded-lg text-left transition-colors ${r.id===t.id?"bg-primary text-primary-foreground":"bg-secondary/50 hover:bg-secondary"}`,"data-testid":`chapter-${t.id}`,children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:t.title.split(":")[0]}),e.jsx("div",{className:"text-xs opacity-80",children:(l=t.title.split(":")[1])==null?void 0:l.trim()})]},t.id)})})]}),e.jsxs("div",{className:"neu-card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:r.title.split(":")[0]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:(a=r.title.split(":")[1])==null?void 0:a.trim()}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:r.articles.map(t=>e.jsxs("button",{onClick:()=>u(t),className:`w-full p-3 rounded-lg text-left transition-colors ${s===t?"bg-accent text-accent-foreground":"bg-secondary/50 hover:bg-secondary"}`,"data-testid":`article-${t}`,children:[e.jsxs("div",{className:"font-medium",children:["Article ",t]}),e.jsxs("div",{className:"text-xs opacity-80",children:[t==="25"&&"Right to life",t==="28"&&"Human dignity",t==="47"&&"Fair administrative action",t==="50"&&"Fair hearing",!["25","28","47","50"].includes(t)&&"Constitutional provision"]})]},t))})]}),e.jsxs("div",{className:"neu-card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Article Details"}),s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-primary/10 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-primary mb-2",children:["Article ",s]}),e.jsxs("p",{className:"text-sm",children:[s==="25"&&"Every person has the right to life.",s==="28"&&"Every person has inherent dignity and the right to have that dignity respected and protected.",s==="47"&&"Every person has the right to administrative action that is expeditious, efficient, lawful, reasonable and procedurally fair.",s==="50"&&"Every person has the right to have any dispute that can be resolved by the application of law decided in a fair and public hearing before a court or, if appropriate, another independent and impartial tribunal or body.",!["25","28","47","50"].includes(s)&&`Constitutional provision from ${r.title.split(":")[0]}.`]})]}),e.jsxs("div",{className:"glass-panel p-4",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-robot text-accent"}),"AI-Powered Summary"]}),h?e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-accent"}),"Generating summary..."]}):m?e.jsx("p",{className:"text-sm text-muted-foreground",children:m}):e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Select an article to see an AI-generated plain-language summary."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Related Resources"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("a",{href:"https://new.kenyalaw.org/",target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-primary hover:underline","data-testid":"related-case-law",children:"→ View related case law"}),e.jsx("a",{href:"https://new.kenyalaw.org/legislation/",target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-primary hover:underline","data-testid":"related-legislation",children:"→ Find implementing legislation"}),e.jsx("button",{onClick:()=>window.open("/forum","_blank"),className:"block text-xs text-accent hover:underline text-left","data-testid":"ask-question",children:"→ Ask a question about this article"})]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"fas fa-book-open text-muted-foreground text-3xl mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"Select an article from the chapter to view its content and AI-generated summary."})]})]})]})]})}function E(){const{toast:r}=j(),{isAuthenticated:d,isLoading:s}=N(),[x,m]=c.useState(p[0]),[n,h]=c.useState("");c.useEffect(()=>{if(!s&&!d){r({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}},[d,s,r]);const{data:i,isLoading:u}=f({queryKey:["/api/constitution/search",n],enabled:n.length>2});return s?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"neu-card p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):e.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[e.jsx(b,{}),e.jsx("main",{className:"py-20 px-4 lg:px-8",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("section",{className:"text-center mb-16",children:[e.jsxs("h1",{className:"text-4xl lg:text-6xl font-bold leading-tight mb-6",children:[e.jsx("span",{className:"gradient-text",children:"Constitution of Kenya"}),e.jsx("br",{}),e.jsx("span",{className:"text-foreground",children:"2010"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"Interactive exploration of Kenya's Constitution with advanced search, chapter navigation, and AI-powered legal summaries."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsxs("a",{href:o.constitution,target:"_blank",rel:"noopener noreferrer",className:"btn-primary","data-testid":"button-download-pdf",children:[e.jsx("i",{className:"fas fa-download mr-2"}),"Download PDF"]}),e.jsxs("a",{href:o.kenyaLaw,target:"_blank",rel:"noopener noreferrer",className:"btn-secondary","data-testid":"button-kenya-law",children:[e.jsx("i",{className:"fas fa-external-link-alt mr-2"}),"Kenya Law Database"]})]})]}),e.jsx("section",{className:"mb-12",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"glass-panel p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("i",{className:"fas fa-search text-primary text-xl"}),e.jsx("input",{type:"text",placeholder:"Search Constitution articles, chapters, or content...",className:"input-glass flex-1 text-lg",value:n,onChange:a=>h(a.target.value),"data-testid":"input-constitution-search"})]}),u&&e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto"})}),i&&i.length>0&&e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Search Results"}),i.map(a=>e.jsxs("div",{className:"neu-card p-4 interactive","data-testid":`search-result-${a.id}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-primary",children:a.title}),e.jsx("span",{className:"text-xs text-muted-foreground",children:a.chapter})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a.content}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded",children:["Article ",a.section]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Relevance: ",Math.round(a.relevance*100),"%"]})]})]},a.id))]})]})})}),e.jsx(w,{selectedChapter:x,onChapterSelect:m}),e.jsxs("section",{className:"mt-16",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Related Legal Resources"}),e.jsx("p",{className:"text-muted-foreground",children:"Access additional legal databases and official government resources"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("a",{href:o.legislation,target:"_blank",rel:"noopener noreferrer",className:"neu-card p-6 text-center interactive","data-testid":"resource-legislation",children:[e.jsx("i",{className:"fas fa-book text-primary text-2xl mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Laws of Kenya"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"500+ chapters of current legislation"})]}),e.jsxs("a",{href:o.judgments,target:"_blank",rel:"noopener noreferrer",className:"neu-card p-6 text-center interactive","data-testid":"resource-judgments",children:[e.jsx("i",{className:"fas fa-gavel text-accent text-2xl mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Case Law"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Searchable judicial decisions"})]}),e.jsxs("a",{href:o.nlas,target:"_blank",rel:"noopener noreferrer",className:"neu-card p-6 text-center interactive","data-testid":"resource-nlas",children:[e.jsx("i",{className:"fas fa-hands-helping text-primary text-2xl mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Legal Aid Services"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"National Legal Aid Service"})]})]})]})]})}),e.jsx(y,{})]})}export{E as default};
